import { Component, OnInit, ViewChild } from '@angular/core';
import { Echipament } from '../shared/echipament.model';
import { ApiService } from '../shared/api.service';
import { DetailModalComponent } from './detail-modal/detail-modal.component';
import { AddEchpComponent } from './add-echp/add-echp.component';

@Component({
  selector: 'app-home',
  templateUrl: './home.component.html',
  styleUrls: ['./home.component.css']
})
export class HomeComponent implements OnInit {
  echipamente: Echipament[] = [];
  searchText: string;
  title: string;

  @ViewChild('detailModal') detailModal: DetailModalComponent;
  @ViewChild('addEchp') addEchp: AddEchpComponent;


  constructor(private api: ApiService) { }

  ngOnInit() {
    this.getEchipamente();
  }

  getEchipamente(){
    this.api.getEchipamente().subscribe((data: Echipament[]) => {

      for (let i = 0; i < data.length; i++) {
        this.api.getEchipament(data[i].id).subscribe((info: Echipament) => {
          info.id = data[i].id;
          if (!info.image) {
           info.image = 'data:image/jpeg;base64,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';
          }
        
          this.echipamente.push(info);
        },
          (e: Error) => {
            console.log('err', e);
          });
      }
    },
      (er: Error) => {
        console.log('err', er);
      });
  }

  showDM(id: number): void {
    this.detailModal.initialize(id);
  }

  showAdd(): void{
    this.addEchp.initialize();
  }

}
